{{#if hasBlock}}
  {{yield model this}}
{{else}}
  {{as-calendar/header title=title model=model}}
{{/if}}

{{#as-calendar/timetable
  model=model
  timeZone=timeZone
  timeSlotHeight=timeSlotHeight
  defaultTimeZoneRegexp=defaultTimeZoneRegexp
  onSelectTime="addOccurrence"
  onChangeTimeZone="changeTimeZone" as |day content|}}
  <ul class="occurrences">
    {{#each day.occurrences as |occurrence|}}
      <li>
        {{as-calendar/occurrence
          model=occurrence
          timeSlotHeight=timeSlotHeight
          timeSlotWidth=content.timeSlotWidth
          referenceElement=content.element
          timeSlotDuration=modelTimeSlotDuration
          onUpdateOccurrence="updateOccurrence"}}
      </li>
    {{/each}}

    {{#if day.occurrencePreview}}
      <li>
        {{as-calendar/occurrence
          model=day.occurrencePreview
          timeSlotHeight=timeSlotHeight
          timeSlotWidth=content.timeSlotWidth
          referenceElement=content.element
          timeSlotDuration=modelTimeSlotDuration
          onUpdateOccurrence="updateOccurrence"}}
      </li>
    {{/if}}
  </ul>
{{/as-calendar/timetable}}
